# Models

Django models.py file uses OPP. We can model things and define their behavior.


# Main Problem of Poll App

We have two models, Question and Choice.

A Question needs a **Question text** and a **Publish date**.

A Choice needs a **Choice text** and a **Number of votes**

# Creating models:

Go to the application where you want to create a model (database layouts) :

```
project_name
│   db.sqlite3   
│   manage.py    
│
└───Site folder
│   │   __init__.py
│   │   settings.py
│   │   urls.py
│   │   asgi.py
│   └── wsgi.py
|
└───Application folder
    │   __init__.py
    │   admin.py
    │   apps.py
    │   models.py # Here you must create your models
    │   tests.py
    │   views.py
    │
    └───migrations
        │  __init__.py 
        │   ...
   

```

You must create your models in /Application folder/models.py

You create a model by creating a class:

```python
class Question(models.Model):
    question_text = models.CharField(max_length=200)
    publish_date = models.DateTimeField(("Date Published"))

    def __str__(self):
        return self.question_text
```

Generally all models are child classes of **models.Model** class.

As you see we created a class that extends **models.Model** and have two variables, **question_text**  and **publish_date**.

Also we redefined the function _str_ this is because, when we want to access to the content of the objects related to the Question model, it will show us the constructor of the class, but it won't show the question_text that is what interest us.
So we rewrote the function to return the question_text variable.

In order to make your app available in your project, you have to include your app in 
INSTALLED_APPS list, located in **/Project/settings.py**

Now you should be able to make migrations in your terminal.

```
python manage.py makemigrations
```


```
python manage.py migrate
```

Basically **makemigrations** command store the changes of the project, similar as git and github allows to us. So we can visualize all the changes we did before a migration.

The **/migrations/0001_initial.py** file has a class Migrations, which stores the operations that we did in the first Migration. Let's look at the first migration I did:


```python
# Generated by Django 3.1.3 on 2020-11-24 16:27

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Question',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('question_text', models.CharField(max_length=200)),
                ('publish_date', models.DateTimeField(verbose_name='Date Published')),
            ],
        ),
        migrations.CreateModel(
            name='Choice',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('choice_text', models.CharField(max_length=200)),
                ('n_votes', models.IntegerField(default=0)),
                ('question', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='poll.question')),
            ],
        ),
    ]
```
As you see it is not a complicated file, it stores as a comment the exactly date and hour you did a migration, Then it has a class **Migration** that extends the class **migrations.Migration** and stores the operations you did. This particular file it let us know that we created two models, with the names of __'Question'__ and __'Choice'__. Also it shows the fields we covered while we created each model.

See [this](https://realpython.com/django-migrations-a-primer/#the-problems-that-migrations-solve) article about migrations in Django, if you want deeper documentation.

